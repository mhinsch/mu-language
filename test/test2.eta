

{
import Math

Individual[Outer @ type] @ class :
public {
	_init($!, x : .x, y : .y, en : .energy) @ Self : \
	
	begin($!, x @ int, y @ int, energy @ float : 0.0) : \
	
	move($!, (x,y) @ int) : \ $.x = x; $.y = y
	
	feed($!, food @ float) : \ $.energy =+ food
	
	step($) @ (float, float) :
		\ <- Math.cos($.dir * $.speed), Math.sin($.dir * $.speed)
	} ++
readonly {
	x @ int
	y @ int
	energy @ float
	
	speed @ float
	dir @ float
	} ++
shared readonly \ env ~>Outer

main :
	{
	Ind @ type : Individual[World]
	popul @ vec[Ind] : ()
	
	100.times`
		\ popul.push Ind(x: Math.rng 100, y: Math.rng 100, 3)
	
	// shouldn't it be like this?
	popul.each` 
		{ 
		-> i @ Ind
		print i.energy
		}
	}

}
